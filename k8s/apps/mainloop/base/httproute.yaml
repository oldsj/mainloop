apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: mainloop-frontend
  namespace: mainloop
spec:
  parentRefs:
    - name: tailscale-gateway
      namespace: tailscale
  hostnames:
    - "mainloop.example.com"  # Configure your Tailscale MagicDNS or custom domain
  rules:
    - backendRefs:
        - name: mainloop-frontend
          port: 3000
---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: mainloop-api
  namespace: mainloop
spec:
  parentRefs:
    - name: tailscale-gateway
      namespace: tailscale
  hostnames:
    - "mainloop-api.example.com"  # Configure your Tailscale MagicDNS or custom domain
  rules:
    - backendRefs:
        - name: mainloop-backend
          port: 8000
      timeouts:
        request: 120s
        backendRequest: 120s
